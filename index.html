<html>
    <head>
        <link rel="stylesheet" href="style.css">
    </head>

<body>


<img id="main-image">

<div id="div1">i</div>
<div id="div2">ii</div>
<div id="div3">iii</div>
<div id="div4">v</div>

<div id="div11">i</div>
<div id="div22">ii</div>
<div id="div33">iii</div>
<div id="div44">v</div>


<div class="pageExtender">    </div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.scrollto@2.1.3/jquery.scrollTo.min.js"></script>

   <script>



$("#div11").click(function(){
        $(document).scrollTo("#div2", 2000)
})

$("#div22").click(function(){
        $(document).scrollTo("#div3", 2000)
})

$("#div33").click(function(){
        $(document).scrollTo("#div4", 2000)
})

$("#div44").click(function(){
        $(document).scrollTo("#div1", 10000)
})

        let imageFile;

        $(document).scroll(function(){
            scrollRatio = $(document).scrollTop()/($(document).height()-$(window).height())
            imageFile = pad(parseInt(scrollRatio*334), 4)+".png";
            $("#main-image").attr("src","bouquet/thumbs/"+imageFile)

            })


    

//this function taken from: https://stackoverflow.com/questions/2998784/how-to-output-numbers-with-leading-zeroes-in-javascript
        function pad(num, size) {
            num = num.toString();
            while (num.length < size) num = "0" + num;
            return num;

        }

//from: https://stackoverflow.com/questions/3701311/event-when-user-stops-scrolling
        $.fn.scrollEnd = function(callback, timeout) {
            $(this).on('scroll', function(){
                var $this = $(this);
                if ($this.data('scrollTimeout')) {
                    clearTimeout($this.data('scrollTimeout'));
                }
                $this.data('scrollTimeout', setTimeout(callback,timeout));
            });
        };

        //from Ali Qadeer, how to call it (with a 1000ms timeout):
        $(document).scrollEnd(function(){
            $("#main-image").attr("src","bouquet/thumbs/"+imageFile)

        }, 250);
        


    


    </script>
</body>

</html>